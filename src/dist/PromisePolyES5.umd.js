!function(t,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof module&&module.exports?module.exports=n():t.PromisePoly=n()}("undefined"!=typeof window?window:global,function(){function c(t){var n={result:null,status:"pending",reason:null},e="pending";Object.defineProperty(this,"status",{get:function(){return n.status}}),Object.defineProperty(this,"reason",{get:function(){return n.reason}}),Object.defineProperty(this,"result",{get:function(){return n.result}});var u=this;function o(t){if(t instanceof c)return t.catchFunc=function(t){n.reason=t,n.status="rejected"},void(t.thenFunc=function(t){n.result=t,n.status="fulfilled"});if("pending"===n.status)throw n.reason=t,n.status="rejected",new Error(n.reason)}this.thenFunc=null,this.catchFunc=null,Object.defineProperty(n,"status",{get:function(){return e},set:function(t){"rejected"===(e=t)?"function"==typeof u.catchFunc&&u.catchFunc(u.reason):"fulfilled"===t&&"function"==typeof u.thenFunc&&u.thenFunc(u.result)}});try{t(function(t){if(t instanceof c)return t.thenFunc=function(t){n.result=t,n.status="fulfilled"},void(t.catchFunc=function(t){n.reason=t,n.status="rejected"});"pending"===n.status&&(n.result=t,n.status="fulfilled")},o)}catch(t){o(t.message)}}return c.prototype.then=function(u,o){var t=this;return new c(function(n,e){"function"==typeof u?"pending"!==t.status?"fulfilled"===t.status?n(u(t.result)):"function"==typeof o?n(o(t.reason)):e(t.reason):(t.thenFunc=function(t){n(u(t))},"function"==typeof o&&(t.catchFunc=function(t){e(o(t))})):n(u)})},c.prototype.catch=function(u){if("function"!=typeof u)throw new TypeError("onRejected Parameter must be a function!");var o=this;return new c(function(n,e){var t;"pending"!==o.status?(t="fulfilled"===o.status,n(t?o.result:u(o.reason))):(o.thenFunc=function(t){n(t)},o.catchFunc=function(t){e(u(t))})})},c});